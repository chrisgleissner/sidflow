$ bun run build && node scripts/run-bun.mjs test ./integration-tests/e2e-suite.ts && cd packages/sidflow-web && bun run test:e2e
$ node scripts/run-bun.mjs install --frozen-lockfile && node scripts/run-bun.mjs run wasm:check-upstream && tsc -b
bun install v1.3.4 (5eb2145b)

Checked 896 installs across 967 packages (no changes) [22.00ms]
$ node scripts/run-bun.mjs run scripts/check-libsidplayfp-upstream.ts
[wasm] Upstream repository: https://github.com/libsidplayfp/libsidplayfp
[wasm] Latest upstream commit: 99cd7607881a3a553cc1600291d7fd222ed57b23
[wasm] No recorded successful builds yet.
[wasm] Upstream changed; WASM rebuild required.
[wasm] Remember to run the WASM build pipeline and commit new artifacts.
bun test v1.3.4 (5eb2145b)

integration-tests/e2e-suite.ts:
2025-12-13 23:53:32.898856: I tensorflow/core/util/util.cc:169] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
2025-12-13 23:53:32.923216: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F AVX512_VNNI AVX512_BF16 AVX_VNNI AMX_TILE AMX_INT8 AMX_BF16 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
Running E2E test with mock sidplayfp
(pass) End-to-End SIDFlow Pipeline > verifies test SID files exist [0.06ms]
(pass) End-to-End SIDFlow Pipeline > builds WAV cache from SID files [50.98ms]
(pass) End-to-End SIDFlow Pipeline > extracts features from WAV files [70.04ms]
(pass) End-to-End SIDFlow Pipeline > validates WAV files have reasonable durations [207.45ms]
(pass) End-to-End SIDFlow Pipeline > respects targetDurationMs by truncating rendered WAV output [1335.15ms]
Failed to load model from data/model/model/model.json: warn: Weight file /workspace/data/model/model/weights.bin does not exist: loading failed
      at <anonymous> (/workspace/node_modules/@tensorflow/tfjs-node/dist/io/file_system.js:69:27)

[jsonl-writer] Writing classification records to: /tmp/sidflow-e2e-HTPXXo/classified/classification_2025-12-13_23-53-34-609.jsonl
(pass) End-to-End SIDFlow Pipeline > classifies SID files with auto-tags [528.09ms]
(pass) End-to-End SIDFlow Pipeline > exports classification to JSONL format [0.11ms]
(pass) End-to-End SIDFlow Pipeline > creates playback controller with classified songs [0.22ms]
(pass) End-to-End SIDFlow Pipeline > loads queue with mock recommendations [0.08ms]
(pass) End-to-End SIDFlow Pipeline > verifies full pipeline metrics [0.11ms]

 10 pass
 0 fail
 43 expect() calls
Ran 10 tests across 1 file. [2.56s]
$ node ./scripts/ensure-playwright-browser.mjs
$ playwright test
[WebServer] $ node ../../scripts/run-bun.mjs run scripts/build-worklet.ts
[WebServer] [test-server] SIDFLOW_SKIP_NEXT_BUILD=1 ‚Äî reusing existing Next.js build.
[WebServer] [baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[WebServer]  ‚ö† "next start" does not work with "output: standalone" configuration. Use "node .next/standalone/server.js" instead.

Running 130 tests using 3 workers

[E2E Coverage Reporter] Coverage collection enabled for all tests
(node:46147) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:46146) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:46153) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:46153) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:46147) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:46146) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] Found 36 focusable elements
[A11y] Tab 1: focused BUTTON
[A11y] Tab 2: focused BUTTON
[A11y] Tab 3: focused BUTTON
[A11y] Tab 4: focused DIV
[A11y] Tab 5: focused INPUT
[A11y] Tab 6: focused BUTTON
[A11y] Tab 7: focused BUTTON
[A11y] Tab 8: focused BUTTON
[A11y] Tab 9: focused BUTTON
[A11y] Tab 10: focused BUTTON
[A11y] Testing button: "‚öôÔ∏èPREFS"
[A11y] Button focused: true
  ‚úì    2 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:59:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Keyboard Navigation ‚Ä∫ should navigate through all interactive elements with Tab (1.0s)
[A11y] Space and Enter keys work on buttons
  ‚úì    3 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:100:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Keyboard Navigation ‚Ä∫ should support Space and Enter to activate buttons (974ms)
[A11y] Escape key successfully closes dialog
  ‚úì    1 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:79:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Keyboard Navigation ‚Ä∫ should support Escape key to close dialogs (6.1s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] Found 6 tabs
[A11y] Arrow key navigation focused: ‚ñ∂Ô∏èPLAY
  ‚úì    4 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:135:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Keyboard Navigation ‚Ä∫ should support arrow keys in tab navigation (25.9s)
[A11y] Found 0 elements with role="button"
[A11y] Found 0 elements with role="dialog"
[A11y] Found 1 elements with role="tablist"
[A11y] Found 6 elements with role="tab"
[A11y] Found 6 elements with role="tabpanel"
[A11y] Found 0 elements with role="navigation"
  ‚úì    6 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:208:9 ‚Ä∫ Accessibility Audit ‚Ä∫ ARIA Compliance ‚Ä∫ should use proper ARIA roles for custom components (30.7s)
[A11y] Checked 27 buttons, 0 missing labels
  ‚úì    5 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:180:9 ‚Ä∫ Accessibility Audit ‚Ä∫ ARIA Compliance ‚Ä∫ should have proper ARIA labels on interactive elements (40.9s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] H1: SIDFlow
[A11y] H3: SETUP WIZARD
[A11y] H3: STEP 1: FETCH
[A11y] H3: ALL STEPS
[A11y] WARNING: Heading level skipped from h1 to h3
[A11y] Heading hierarchy has issues
  ‚úì    7 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:228:9 ‚Ä∫ Accessibility Audit ‚Ä∫ ARIA Compliance ‚Ä∫ should have proper heading hierarchy (25.1s)
[A11y] Landmarks found: { main: [33m1[39m, nav: [33m0[39m, header: [33m1[39m, footer: [33m0[39m }
  ‚úì    9 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:283:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Semantic HTML ‚Ä∫ should use semantic landmarks (10.3s)
[A11y] Found 1 aria-live regions
[A11y] aria-live="assertive": 
  ‚úì    8 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:261:9 ‚Ä∫ Accessibility Audit ‚Ä∫ ARIA Compliance ‚Ä∫ should have aria-live regions for dynamic content (30.4s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] Checked 1 images, 0 missing alt text
  ‚úì   11 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:337:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Semantic HTML ‚Ä∫ should have alt text for images (20.8s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] Initial focus: INPUT
[A11y] Focus trapped in dialog: true
  ‚úì   13 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:401:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Focus Management ‚Ä∫ should trap focus in modal dialogs (6.0s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] Focus before dialog: "Login", after: "SIDFlowCOMMODORE 64 MUSIC PLAYERPREFSPLAYFAVORITESTOP CHARTSACTIVITYPROFILESLoginSign Up‚öôÔ∏èPREFS‚ñ∂Ô∏èPLAY‚ù§Ô∏èFAVORITESüìäTOP CHARTSüì°ACTIVITYüë§PROFILESSurprise MeAdvanced FiltersSave QueuePlaylistsPLAY SID MUSICBuild a playlist for the selected mood and enjoy hands-free playback.EnergeticPLAY NEXT TRACKMOOD TRANSITIONERA EXPLORERHIDDEN GEMSCHIP MODEL0:003:00Played TracksMost recent first ‚Ä¢ click to replayNo songs played yet.Upcoming TracksFixed queue for this mood#1 ‚Ä¢ Superman Pt02 ThemeBrian M. SzepatowskiQueuedRecently PlayedLast 20 tracks from all sessionsNo recent playback historySID COLLECTION BROWSERNavigate folders and play SID files from your local collectionCollectionFolders (1)C64MusicREADY TO PLAY.requestAnimationFrame(function(){$RT=performance.now()});$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")(self.__next_f=self.__next_f||[]).push([0])self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[93368,[\"/_next/static/chunks/daefb0907b743f22.js\",\"/_next/static/chunks/e74eda5a95a72dd6.js\"],\"PreferencesProvider\"]\n3:I[1902,[\"/_next/static/chunks/daefb0907b743f22.js\",\"/_next/static/chunks/e74eda5a95a72dd6.js\"],\"ToastProvider\"]\n4:I[36622,[\"/_next/static/chunks/daefb0907b743f22.js\",\"/_next/static/chunks/e74eda5a95a72dd6.js\"],\"CrossOriginIsolatedCheck\"]\n5:I[34093,[\"/_next/static/chunks/daefb0907b743f22.js\",\"/_next/static/chunks/e74eda5a95a72dd6.js\"],\"ServiceWorkerBridge\"]\n6:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/848fe5fcbab03adc.js\"],\"default\"]\n7:I[28910,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/848fe5fcbab03adc.js\"],\"default\"]\n8:I[96653,[\"/_next/static/chunks/daefb0907b743f22.js\",\"/_next/static/chunks/e74eda5a95a72dd6.js\"],\"ToastViewport\"]\n9:\"$Sreact.suspense\"\na:I[74105,[\"/_next/static/chunks/daefb0907b743f22.js\",\"/_next/static/chunks/e74eda5a95a72dd6.js\",\"/_next/static/chunks/b4300763ce787e6f.js\",\"/_next/static/chunks/2cf9eebe9621af99.js\",\"/_next/static/chunks/ac8b4b9de631adaf.js\"],\"SidflowApp\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/848fe5fcbab03adc.js\"],\"OutletBoundary\"]\nd:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/848fe5fcbab03adc.js\"],\"ViewportBoundary\"]\nf:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/848fe5fcbab03adc.js\"],\"MetadataBoundary\"]\n11:I[68027,[],\"default\"]\n12:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/848fe5fcbab03adc.js\"],\"IconMark\"]\n:HL[\"/_next/static/chunks/9c30a589706bd23f.css\",\"style\"]\n"])self.__next_f.push([1,"0:{\"P\":null,\"b\":\"Qqd7kriTVJYsmS27s2gGv\",\"c\":[\"\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/9c30a589706bd23f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/daefb0907b743f22.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/e74eda5a95a72dd6.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased font-c64\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{}],[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"$L8\",null,{}]]}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$9\",null,{\"fallback\":[\"$\",\"div\",null,{\"className\":\"min-h-screen flex items-center justify-center\",\"children\":\"Loading...\"}],\"children\":[\"$\",\"$La\",null,{\"persona\":\"public\"}]}],[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/b4300763ce787e6f.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2cf9eebe9621af99.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/ac8b4b9de631adaf.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@c\"}]}]]}],{},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$Ld\",null,{\"children\":\"$@e\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lf\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@10\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",[]],\"s\":false,\"S\":false}\n"])self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n10:[[\"$\",\"title\",\"0\",{\"children\":\"SIDFlow Control Panel\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Local web interface for SIDFlow - play, rate, and classify SID music\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L12\",\"3\",{}]]\nc:null\n"])"
  ‚úì   14 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:434:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Focus Management ‚Ä∫ should restore focus after closing dialog (5.8s)
[A11y] Checked 1 inputs, 0 unlabeled
  ‚úì   10 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:300:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Semantic HTML ‚Ä∫ should have proper form labels (36.0s)
[A11y] Focus indicator styles: {
  outline: [32m'rgb(255, 255, 255) none 0px'[39m,
  outlineWidth: [32m'0px'[39m,
  outlineStyle: [32m'none'[39m,
  boxShadow: [32m'rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgb(80, 199, 232) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.1) 0px 1px 2px -1px'[39m,
  border: [32m'0px solid rgb(255, 255, 255)'[39m
}
  ‚úì   12 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:365:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Focus Management ‚Ä∫ should have visible focus indicators (20.9s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[A11y] Page title: "SIDFlow Control Panel"
  ‚úì   16 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:497:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Screen Reader Support ‚Ä∫ should have proper document title (16.4s)
[A11y] Checked 0 links, 0 with vague text
  ‚úì   17 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:507:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Screen Reader Support ‚Ä∫ should have descriptive link text (16.5s)
[A11y] Checked 20 text elements, 0 potential contrast issues
  ‚úì   15 [chromium] ‚Ä∫ tests/e2e/accessibility.spec.ts:463:9 ‚Ä∫ Accessibility Audit ‚Ä∫ Color Contrast ‚Ä∫ should have sufficient color contrast for text (20.0s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   18 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:20:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should display advanced search bar with filters toggle (1.1s)
  ‚úì   19 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:34:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should search by title and display results (1.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   20 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:48:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should search by artist and display results (1.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   21 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:62:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should clear search with X button (1.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   23 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:103:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should apply year range filter (1.1s)
  ‚úì   22 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:78:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should toggle advanced filters panel (1.4s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   24 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:127:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should apply duration range filter (1.0s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   25 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:151:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should clear all filters (1.1s)
  ‚úì   27 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:207:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should trigger Surprise Me and play random track (727ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   26 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:177:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should accept search input for playing songs (1.7s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   28 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:218:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should handle search for artist names (934ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   29 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:230:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should handle no results gracefully (1.0s)

üì¶ Setting up synthetic test files...
   ‚úÖ Created API_Test_Low.sid + pre-rendered WAV
   ‚úÖ Created API_Test_Mid.sid + pre-rendered WAV
   ‚úÖ Created API_Test_High.sid + pre-rendered WAV

================================================================================
üöÄ CLASSIFICATION API E2E TEST
================================================================================

‚è≥ Step 0: Ensuring classification is idle
----------------------------------------
   üîÑ Checking if classification is idle...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
   ‚úÖ Classification is idle, ready to start new classification

üìã Step 1: Initial State
----------------------------------------
   JSONL files before: 0

üîß Step 2: Triggering Classification via REST API
----------------------------------------
   POST /api/classify
   Path: C64Music/MUSICIANS/T/Test_E2E_API
   Options: skipAlreadyClassified=false
   Note: Using pre-rendered WAVs (no forceRebuild needed)

   Response received in 0.03s
   Status: 202

‚è≥ Waiting for classification to complete...
   üîÑ Checking if classification is idle...
   ‚è≥ Classification in progress (phase: analyzing), waiting... (0s elapsed)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   31 [chromium] ‚Ä∫ tests/e2e/audio-fidelity.spec.ts:391:5 ‚Ä∫ Audio Fidelity - AudioWorklet + SAB Pipeline ‚Ä∫ Rate and play tabs initialize shared pipeline (934ms)
  ‚úì   30 [chromium] ‚Ä∫ tests/e2e/advanced-search.spec.ts:242:5 ‚Ä∫ Advanced Search & Discovery ‚Ä∫ should maintain search input when clicking outside (1.3s)
   ‚ö†Ô∏è  Progress endpoint unavailable, proceeding...

‚úÖ Classification accepted (async) and completed in background

üìÅ Step 3: Identifying Output Files
----------------------------------------
   JSONL files after: 1
   New JSONL files: 1
   ‚úÖ New JSONL: classification_2025-12-13_23-55-28-242.jsonl

üîä Step 4: Checking Audio Cache
----------------------------------------
   ‚úÖ API_Test_Low.wav (86.2 KB)
   ‚úÖ API_Test_Mid.wav (86.2 KB)
   ‚úÖ API_Test_High.wav (86.2 KB)

üè∑Ô∏è  Step 5: Checking Tags
----------------------------------------
   auto-tags.json: ‚ùå missing

üìä Step 6: Validating JSONL Content
----------------------------------------
   Total entries in JSONL: 3

   Found entry for API_Test_Low:
   sid_path: API_Test_Low.sid

   Essentia.js Features:
     energy:           0.000016
     rms:              0.003991
     spectralCentroid: 2000.00 Hz
     spectralRolloff:  4000.00 Hz
     zeroCrossingRate: 0.000136
     bpm:              60.0
     duration:         10.00s
     sampleRate:       44100 Hz
     numSamples:       110250
     wavBytes:         N/A
     sidBytes:         N/A
[WebServer] [classify stderr] 2025-12-13 23:55:28.167482: I tensorflow/core/util/util.cc:169] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
[WebServer] 2025-12-13 23:55:28.225567: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F AVX512_VNNI AVX512_BF16 AVX_VNNI AMX_TILE AMX_INT8 AMX_BF16 FMA
[WebServer] To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [featurePool] Feature worker exited with code: 0
[WebServer] [featurePool] Feature worker exited with code: 0
[WebServer] 

   Found entry for API_Test_Mid:
   sid_path: API_Test_Mid.sid

   Essentia.js Features:
     energy:           0.000014
     rms:              0.003704
     spectralCentroid: 2000.00 Hz
     spectralRolloff:  4000.00 Hz
     zeroCrossingRate: 0.000118
     bpm:              60.0
     duration:         10.00s
     sampleRate:       44100 Hz
     numSamples:       110250
     wavBytes:         N/A
     sidBytes:         N/A

   Found entry for API_Test_High:
   sid_path: API_Test_High.sid

   Essentia.js Features:
     energy:           0.000016
     rms:              0.003991
     spectralCentroid: 2000.00 Hz
     spectralRolloff:  4000.00 Hz
     zeroCrossingRate: 0.000136
     bpm:              60.0
     duration:         10.00s
     sampleRate:       44100 Hz
     numSamples:       110250
     wavBytes:         N/A
     sidBytes:         N/A

   ‚úÖ Found all 3/3 test songs in JSONL

================================================================================
üìã SUMMARY: All Output Files Created
================================================================================

‚úÖ JSONL Classification Output:
   /workspace/test-workspace/classified/classification_2025-12-13_23-55-28-242.jsonl

‚úÖ WAV Audio Cache (3 files):
   /workspace/test-workspace/audio-cache/C64Music/MUSICIANS/T/Test_E2E_API/API_Test_Low.wav
   /workspace/test-workspace/audio-cache/C64Music/MUSICIANS/T/Test_E2E_API/API_Test_Mid.wav
   /workspace/test-workspace/audio-cache/C64Music/MUSICIANS/T/Test_E2E_API/API_Test_High.wav

‚úÖ Auto-Tags:
   /workspace/test-workspace/tags/MUSICIANS/T/Test_E2E_API/auto-tags.json

================================================================================
üéâ ALL TESTS PASSED - Classification API E2E Complete
================================================================================


üßπ Cleaning up test files...
   ‚úÖ Cleanup complete
  ‚úì   32 [chromium] ‚Ä∫ tests/e2e/classify-api-e2e.spec.ts:200:3 ‚Ä∫ Classification API E2E ‚Ä∫ triggers classification via REST API and verifies all output files (21.2s)

üì¶ Setting up incremental test files...
   ‚úÖ Created 5 test SIDs with pre-rendered WAVs

================================================================================
üîÑ JSONL FORMAT VALIDATION E2E TEST
================================================================================

üìã Initial JSONL files: 1
   üîÑ Checking if classification is idle...
   ‚úÖ Classification is idle, ready to start new classification

üîß Starting classification via REST API...
   Path: C64Music/MUSICIANS/I/Incremental_Test
   Songs: 5
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [classify stderr] 2025-12-13 23:55:49.116014: I tensorflow/core/util/util.cc:169] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
[WebServer] 
[WebServer] [classify stderr] 2025-12-13 23:55:49.142033: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F AVX512_VNNI AVX512_BF16 AVX_VNNI AMX_TILE AMX_INT8 AMX_BF16 FMA
[WebServer] To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
[WebServer] 
[Fidelity][rate] passed=true duration=0.660 freq=259.41 dropouts=0
  ‚úì   33 [chromium] ‚Ä∫ tests/e2e/audio-fidelity.spec.ts:428:5 ‚Ä∫ Audio Fidelity - C4 Test SID ‚Ä∫ Rate tab: C4 test SID fidelity (22.8s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Fidelity][play] passed=true duration=0.660 freq=259.41 dropouts=0
  ‚úì   36 [chromium] ‚Ä∫ tests/e2e/audio-fidelity.spec.ts:444:5 ‚Ä∫ Audio Fidelity - C4 Test SID ‚Ä∫ Play tab: C4 test SID fidelity (2.4s)
[WebServer] [classify stderr] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] 

‚úÖ Classification completed in 7.41s

üìÅ New JSONL file: classification_2025-12-13_23-55-49-173.jsonl

üìä JSONL Content Analysis:
   Total lines: 5
   Expected: 5

üîç Validating each JSONL record:
   ‚úÖ Line 1: Incr_Song_04.sid - features: 15
   ‚úÖ Line 2: Incr_Song_03.sid - features: 15
   ‚úÖ Line 3: Incr_Song_01.sid - features: 15
   ‚úÖ Line 4: Incr_Song_02.sid - features: 15
   ‚úÖ Line 5: Incr_Song_05.sid - features: 15

üìù Verifying JSONL format:
   ‚úÖ Each record is on its own line (JSONL format)
   ‚úÖ Records are complete and valid (not truncated)
   ‚úÖ Features extracted for each record
   ‚úÖ No batch markers or grouping detected
   ‚úÖ File starts with '{' (not '[') - confirms JSONL, not JSON array

================================================================================
üìã JSONL FORMAT VALIDATION SUMMARY
================================================================================

‚úÖ JSONL file: classification_2025-12-13_23-55-49-173.jsonl
‚úÖ Records written: 5
‚úÖ All songs found: 5/5
‚úÖ All records have features (Essentia.js extraction worked)
‚úÖ File format is valid JSONL (one JSON object per line)

üéâ JSONL FORMAT VALIDATION TEST PASSED
================================================================================


üßπ Cleaning up incremental test files...
   ‚úÖ Cleanup complete
  ‚úì   35 [chromium] ‚Ä∫ tests/e2e/classify-api-e2e.spec.ts:472:3 ‚Ä∫ JSONL Format Validation E2E ‚Ä∫ verifies JSONL output format and record validity (7.5s)

=== Validating Classification Output Format ===

[Output] Stdout length: 1748 chars

=== Verifying Phase Presence in Output ===

[‚úì] Phase 'analyzing' found (patterns: [Analyzing], [Thread)
[‚úì] Phase 'metadata' found (patterns: [Reading Metadata], Reading metadata:)
[‚úì] Phase 'building' found (patterns: [Converting], Rendering:)
[‚úì] Phase 'tagging' found (patterns: [Extracting Features], Extracting features:)

=== Verifying Multi-threaded Operation ===

[Threads] Thread 1 messages: 9, Thread 2 messages: 9

=== Verifying No Stale Markers ===

[‚úì] No stale markers found in output

=== Verifying Clean Completion ===

[‚úì] Both threads completed cleanly (IDLE status)

=== Verifying Rendering Phase Thread Activity ===

[Rendering] Found 9 rendering-related lines
[Rendering] Thread rendering messages: 4
[Rendering] Thread 1 renders: 2, Thread 2 renders: 2
[Rendering] Progress updates: 5

=== All Tests Passed: Phases verified, threads active, no stale status ===

  ‚úì   38 [chromium] ‚Ä∫ tests/e2e/classify-phase-transitions.spec.ts:55:3 ‚Ä∫ Classification Phase Transitions ‚Ä∫ should contain all phases and thread updates without stale status (5ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [classify stderr] 2025-12-13 23:55:56.665938: I tensorflow/core/util/util.cc:169] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
[WebServer] 
[WebServer] [classify stderr] 2025-12-13 23:55:56.696433: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F AVX512_VNNI AVX512_BF16 AVX_VNNI AMX_TILE AMX_INT8 AMX_BF16 FMA
[WebServer] To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
[WebServer] 
  ‚úì   39 [chromium] ‚Ä∫ tests/e2e/classify-progress-metrics.spec.ts:129:3 ‚Ä∫ Classify progress metrics ‚Ä∫ displays rendered and tagged counts (605ms)
[PauseResumeTest] Navigating to Play tab...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[PauseResumeTest] Starting playback...
[Browser] [WorkletPlayer] ‚úì AudioWorklet initialized
[Browser] [WorkletPlayer] ‚úì Web Worker initialized
[Browser] [WorkletPlayer] Worker loaded SID payload
[Browser] [WorkletPlayer] Worker load resolved
[Browser] [WorkletPlayer] play() invoked {state: ready}
[Browser] [WorkletPlayer] Worker pre-roll complete, ready to play
[Browser] [WorkletPlayer] Worker ready resolved, continuing playback setup
[PauseResumeTest] Player ready
[PauseResumeTest] Waiting for playback to start...
[PauseResumeTest] Playback started: position=0.209s, state=playing
[PauseResumeTest] Position before pause: 0.209s
[PauseResumeTest] Clicking pause button...
[Browser] [WorkletPlayer] pause() saved position: elapsed=0.2583219954648526, pausedPosition=0.2583219954648526, duration=1
[Browser] [WorkletPlayer] pause() completed, state=paused
[PauseResumeTest] Paused: state=paused
[PauseResumeTest] Position while paused: 0.258s
[PauseResumeTest] ‚úì Position preserved during pause (0.258s)
[PauseResumeTest] Clicking resume button...
[Browser] [WorkletPlayer] play() invoked {state: paused}
[Browser] [WorkletPlayer] Resuming from pause, skipping worker ready wait
[PauseResumeTest] Resumed: state=playing
[PauseResumeTest] Position after resume: 0.290s
[PauseResumeTest] ‚úì Position continued correctly after resume (0.290s)
[PauseResumeTest] Final position: 0.299s
[PauseResumeTest] ‚úì Test passed: pause/resume position preservation works correctly
  ‚úì   40 [chromium] ‚Ä∫ tests/e2e/pause-resume-position.spec.ts:152:5 ‚Ä∫ Pause/Resume Position Preservation ‚Ä∫ progress bar maintains position when paused and continues correctly on resume (1.8s)
[PauseResumeTest] Navigating to Play tab...
[WebServer] [classify stderr] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [featurePool] Feature worker exited with code: 0
[WebServer] 
  ‚úì   34 [chromium] ‚Ä∫ tests/e2e/classify-essentia-e2e.spec.ts:123:3 ‚Ä∫ Classification Output with Essentia.js Features ‚Ä∫ runs classification and verifies JSONL contains rich audio features (30.7s)
  ‚úì   42 [chromium] ‚Ä∫ tests/e2e/classify-essentia-e2e.spec.ts:172:3 ‚Ä∫ Classification Output with Essentia.js Features ‚Ä∫ writes auto-tags.json with ratings for the classified SID (10ms)
[Performance] Testing HVSC fetch UI (test collection mode)...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[heartbeat] ensuring classification is idle before starting
[PauseResumeTest] Starting playback...
[heartbeat] starting background classification run
[heartbeat] classify start response status [33m202[39m
[heartbeat] classification start request accepted
[heartbeat] poll=1 phase=analyzing active=true stale=0 working=0
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [classify stderr] 2025-12-13 23:55:59.606743: I tensorflow/core/util/util.cc:169] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
[WebServer] 
[WebServer] [classify stderr] 2025-12-13 23:55:59.632481: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F AVX512_VNNI AVX512_BF16 AVX_VNNI AMX_TILE AMX_INT8 AMX_BF16 FMA
[WebServer] To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
[WebServer] 
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-hvsc-fetch-ui-1765670160023.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-hvsc-fetch-ui-1765670160072.json
  ‚úì   43 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:325:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ 1. HVSC Fetch - Download via admin UI (1.1s)
[PauseResumeTest] Player ready
[PauseResumeTest] Waiting for playback to start...
[PauseResumeTest] Playback started: position=0.171s, state=playing
[PauseResumeTest] Cycle 1/2
[PauseResumeTest] Clicking pause button...
[PauseResumeTest] Paused: state=paused
[PauseResumeTest] Cycle 1 paused at: 0.261s
[PauseResumeTest] Clicking resume button...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[PauseResumeTest] Resumed: state=playing
[PauseResumeTest] Cycle 1 resumed at: 0.290s
[PauseResumeTest] Cycle 2/2
[PauseResumeTest] Clicking pause button...
[PauseResumeTest] Paused: state=paused
[PauseResumeTest] Cycle 2 paused at: 0.342s
[PauseResumeTest] Clicking resume button...
[PauseResumeTest] Resumed: state=playing
[PauseResumeTest] Cycle 2 resumed at: 0.412s
[PauseResumeTest] ‚úì Multiple pause/resume cycles completed successfully
  ‚úì   41 [chromium] ‚Ä∫ tests/e2e/pause-resume-position.spec.ts:259:5 ‚Ä∫ Pause/Resume Position Preservation ‚Ä∫ progress bar maintains position across multiple pause/resume cycles (2.1s)
[Performance] search: 310ms (status: 200)
[Performance] favorites: 3ms (status: 200)
[Performance] playlists: 5ms (status: 200)
[Performance] charts-daily: 5ms (status: 400)
[Performance] activity: 5ms (status: 200)
[Performance] Saved metrics to /workspace/tmp/performance/perf-api-endpoints-1765670161263.json
  ‚úì   45 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:507:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ measure API endpoint performance (434ms)
[heartbeat] poll=5 phase=metadata active=true stale=0 working=4
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-initial-load-1765670161420.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-initial-load-1765670161442.json
[Performance] Page load time: 1222ms
[Performance] DOM content loaded: 55ms
[Performance] First contentful paint: 183.27500000596046ms
[Performance] Largest contentful paint: 183.27500000596046ms
  ‚úì   44 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:357:9 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ measure initial page load performance (1.4s)
[Performance] Testing folder browser (test collection mode)...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [classify stderr] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] [wasmRenderPool] Worker exited with code: 0
[WebServer] 
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [renderWav] Hash write failed for HB_Test_05.wav Error: ENOENT: no such file or directory, open '/workspace/test-workspace/hvsc/C64Music/MUSICIANS/T/Test_E2E_Heartbeat/HB_Test_05.sid'
[WebServer]     at async d (.next/server/chunks/[root-of-the-server]__7c14e505._.js:1:13745)
[WebServer]     at async c (.next/server/chunks/[root-of-the-server]__7c14e505._.js:1:16157)
[WebServer]     at async w (.next/server/chunks/[root-of-the-server]__dbf44b9f._.js:1:3013)
[WebServer]     at async x (.next/server/chunks/[root-of-the-server]__dbf44b9f._.js:1:4658)
[WebServer]     at async $ (.next/server/chunks/[root-of-the-server]__dbf44b9f._.js:1:6234)
[WebServer]     at async (.next/server/chunks/[root-of-the-server]__dbf44b9f._.js:1:6972)
[WebServer]     at async _ (.next/server/chunks/[root-of-the-server]__1554a2bd._.js:1:878) {
[WebServer]   errno: -2,
[WebServer]   code: 'ENOENT',
[WebServer]   syscall: 'open',
[WebServer]   path: '/workspace/test-workspace/hvsc/C64Music/MUSICIANS/T/Test_E2E_Heartbeat/HB_Test_05.sid'
[WebServer] }
  ‚úò   37 [chromium] ‚Ä∫ tests/e2e/classify-heartbeat.spec.ts:147:1 ‚Ä∫ Classification Heartbeat - threads should not become stale during feature extraction (28.8s)
(node:49264) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:49264) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
[Performance] Testing classification workflow...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-folder-browser-1765670183500.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-folder-browser-1765670183509.json
[Performance] Initial load: 25ms
[Performance] Folder list load: 20ms
[Performance] Folders visible: 0
[Performance] Folder expand: 0ms
[Performance] Scroll (5 steps): 520ms, avg 104.00ms/step
  ‚úì   47 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:381:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ 2. Folder Browser - Navigate and scroll through full HVSC (22.0s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-search-ui-1765670184621.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-search-ui-1765670184631.json
[Performance] Search UI available: false
[Performance] Search time: 0ms
[Performance] Generated report: /workspace/tmp/performance/performance-report-1765670184655.md
  ‚úì   49 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:468:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ measure search performance with full HVSC (1.1s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] Initial heap: 11.75MB
[Performance] After Navigate to Favorites: 12.19MB
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-classification-workflow-1765670187144.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-classification-workflow-1765670187155.json
[Performance] Navigation to classify tab: 1002ms
[Performance] Trigger classification: 2095ms
  ‚úì   48 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:773:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ 6. Classification Workflow - Trigger analysis via admin UI (4.3s)
[Performance] Testing training workflow...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] After Navigate to Charts: 12.43MB
  ‚úì   50 [chromium] ‚Ä∫ tests/e2e/play-tab.spec.ts:105:5 ‚Ä∫ PlayTab Personalized Features ‚Ä∫ creates personalized station from the current song (3.5s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] After Navigate back to Play: 12.68MB
  ‚úì   52 [chromium] ‚Ä∫ tests/e2e/play-tab.spec.ts:120:5 ‚Ä∫ PlayTab Personalized Features ‚Ä∫ displays personal and community ratings for the song in play (1.4s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
Pause button count (random SID test): [33m1[39m
[RateTab] Pause readiness for random SID test: {
  state: [32m'ready'[39m,
  ariaPressed: [32m'false'[39m,
  telemetry: { framesProduced: [33m0[39m, framesConsumed: [33m0[39m }
}
Pause button HTML (random SID test): <button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 w-9" aria-label="Pause playback / Resume playback" aria-pressed="true" title="Pause playback"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pause h-4 w-4" aria-hidden="true"><rect x="14" y="3" width="5" height="18" rx="1"></rect><rect x="5" y="3" width="5" height="18" rx="1"></rect></svg></button>
Browser console messages: [
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: load-start, ready: false, hasTrack: false, isAudioLoading: true, playerState: idle}'[39m,
  [32m'[debug] [RateTab] loadTrackIntoPlayer: starting load {track: /virtual/test-tone-c4.sid, sessionId: rate-stub-1765670190044-1}'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: player-statechange:loading, ready: false, hasTrack: false, isAudioLoading: true, playerState: loading}'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: is-audio-loading-change, ready: false, hasTrack: false, isAudioLoading: true, playerState: loading}'[39m,
  [32m'[log] [WorkletPlayer] ‚úì AudioWorklet initialized'[39m,
  [32m'[log] [SidProducer] Buffer strategy configured {capacityFrames: 32768, preRollFrames: 2560, renderChunkFrames: 2048, renderCyclesPerChunk: 98304, blockSize: 128}'[39m,
  [32m'[log] [SidProducer] ‚úì Initialized {sampleRate: 44100, channels: 2, blockSize: 128}'[39m,
  [32m'[log] [WorkletPlayer] ‚úì Web Worker initialized'[39m,
  [32m'[log] [SidProducer] ‚úì Loaded SID buffer into engine'[39m,
  [32m'[log] [SidProducer] ‚úì Selected song {selectedSong: 1}'[39m,
  [32m'[log] [WorkletPlayer] Worker loaded SID payload'[39m,
  [32m'[log] [WorkletPlayer] Worker load resolved'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: player-statechange:ready, ready: false, hasTrack: false, isAudioLoading: true, playerState: ready}'[39m,
  [32m'[debug] [RateTab] loadTrackIntoPlayer: load resolved {track: /virtual/test-tone-c4.sid, playerState: ready}'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: track-loaded, ready: true, hasTrack: true, isAudioLoading: true, playerState: ready}'[39m,
  [32m'[log] [WorkletPlayer] play() invoked {state: ready}'[39m,
  [32m'[log] [SidProducer] Pre-roll start {targetFrames: 2560}'[39m,
  [32m'[warning] [SidProducer] Occupancy reached zero before producing new audio {framesProduced: 0}'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: current-track-change, ready: true, hasTrack: true, isAudioLoading: true, playerState: ready}'[39m,
  [32m'[debug] [RateTab] Pause ready state updated {isPauseReady: true}'[39m,
  [32m'[log] [SidProducer] Pre-roll complete {occupancy: 2560, shouldStop: false}'[39m,
  [32m'[log] [WorkletPlayer] Worker pre-roll complete, ready to play'[39m,
  [32m'[log] [WorkletPlayer] Worker ready resolved, continuing playback setup'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: player-statechange:playing, ready: true, hasTrack: true, isAudioLoading: true, playerState: playing}'[39m,
  [32m'[debug] [RateTab] loadTrackIntoPlayer: play resolved {track: /virtual/test-tone-c4.sid, playerState: playing}'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: playback-start, ready: true, hasTrack: true, isAudioLoading: false, playerState: playing}'[39m,
  [32m'[debug] [RateTab] loadTrackIntoPlayer: load finished {trackAttempted: /virtual/test-tone-c4.sid, playbackStarted: true, playerState: playing, isAudioLoading: false}'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: is-audio-loading-change, ready: true, hasTrack: true, isAudioLoading: false, playerState: playing}'[39m,
  [32m'[log] [WorkletPlayer] pause() saved position: elapsed=0.4005442176870748, pausedPosition=0.4005442176870748, duration=1'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: player-statechange:paused, ready: true, hasTrack: true, isAudioLoading: false, playerState: paused}'[39m,
  [32m'[log] [WorkletPlayer] pause() completed, state=paused'[39m,
  [32m'[log] [WorkletPlayer] play() invoked {state: paused}'[39m,
  [32m'[log] [WorkletPlayer] Resuming from pause, skipping worker ready wait'[39m,
  [32m'[debug] [RateTab] Pause readiness recalculated {origin: player-statechange:playing, ready: true, hasTrack: true, isAudioLoading: false, playerState: playing}'[39m
]
  ‚úì   53 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:226:9 ‚Ä∫ RateTab Browser Playback ‚Ä∫ loads and plays a random SID (1.6s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   54 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:327:9 ‚Ä∫ RateTab Browser Playback ‚Ä∫ displays rating controls and allows submission (1.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[RateTab] Pause readiness for play tab playlist test: {
  state: [32m'ready'[39m,
  ariaPressed: [32m'false'[39m,
  telemetry: { framesProduced: [33m0[39m, framesConsumed: [33m0[39m }
}
  ‚úì   55 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:399:9 ‚Ä∫ PlayTab Browser Playback ‚Ä∫ loads playlist and plays tracks (1.3s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   56 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:447:9 ‚Ä∫ PlayTab Browser Playback ‚Ä∫ handles mood preset changes (636ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] After Open search: 11.15MB
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-training-workflow-1765670195603.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-training-workflow-1765670195618.json
[Performance] Navigation to rate tab: 1002ms
[Performance] Rating submission: 537ms
[Performance] Generated report: /workspace/tmp/performance/performance-report-1765670195643.md
  ‚úì   51 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:817:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ 7. Training Workflow - Submit ratings and trigger retrain (8.4s)
[RateTab] Pause readiness for play tab metadata test: {
  state: [32m'ready'[39m,
  ariaPressed: [32m'false'[39m,
  telemetry: { framesProduced: [33m0[39m, framesConsumed: [33m0[39m }
}
  ‚úì   57 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:462:9 ‚Ä∫ PlayTab Browser Playback ‚Ä∫ displays track information during playback (1.3s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   59 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:594:9 ‚Ä∫ WASM Asset Loading ‚Ä∫ loads WASM module from /wasm/ path (517ms)
[Performance] After Perform search: 11.40MB
[Performance] Saved metrics to /workspace/tmp/performance/perf-memory-usage-1765670196483.json
[Performance] Total heap growth: -0.35MB
  ‚úì   46 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:550:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ measure memory usage during extended session (35.2s)
[Performance] Testing recommendation engine...
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   60 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:635:9 ‚Ä∫ Error Handling ‚Ä∫ handles playback errors gracefully (577ms)
  ‚úì   58 [chromium] ‚Ä∫ tests/e2e/playback.spec.ts:499:9 ‚Ä∫ PlayTab Browser Playback ‚Ä∫ queues playback while offline and resumes once online (1.6s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   62 [chromium] ‚Ä∫ tests/e2e/playlists.spec.ts:194:5 ‚Ä∫ Playlists Feature ‚Ä∫ should show playlists button and empty state (870ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   64 [chromium] ‚Ä∫ tests/e2e/playlists.spec.ts:242:5 ‚Ä∫ Playlists Feature ‚Ä∫ should delete playlist (1.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   63 [chromium] ‚Ä∫ tests/e2e/playlists.spec.ts:205:5 ‚Ä∫ Playlists Feature ‚Ä∫ should create playlist and show in list (1.9s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   65 [chromium] ‚Ä∫ tests/e2e/playlists.spec.ts:278:5 ‚Ä∫ Playlists Feature ‚Ä∫ should show export and share buttons (822ms)
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-recommendation-engine-1765670199910.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-recommendation-engine-1765670199924.json
[Performance] Station generation: 2083ms
[Performance] Track loaded: false
  ‚úì   61 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:636:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ 4. Recommendation Engine - Generate personalized station (3.4s)
[Performance] Testing playlist operations...
  ‚úì   66 [chromium] ‚Ä∫ tests/e2e/playlists.spec.ts:312:5 ‚Ä∫ Playlists Feature ‚Ä∫ should handle M3U export (845ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   69 [chromium] ‚Ä∫ tests/e2e/scheduler-export-import.spec.ts:54:3 ‚Ä∫ Classification Scheduler ‚Ä∫ should display all scheduler UI elements (465ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   70 [chromium] ‚Ä∫ tests/e2e/scheduler-export-import.spec.ts:66:3 ‚Ä∫ Classification Scheduler ‚Ä∫ should toggle scheduler enabled state (444ms)
  ‚úì   67 [chromium] ‚Ä∫ tests/e2e/playlists.spec.ts:351:5 ‚Ä∫ Playlists Feature ‚Ä∫ should copy share URL to clipboard (1.3s)
[Performance] Saved CPU profile to /workspace/tmp/performance/profile-playlist-operations-1765670201358.cpuprofile
[Performance] Open in Chrome DevTools or convert to flamegraph with speedscope
[Performance] Saved metrics to /workspace/tmp/performance/perf-playlist-operations-1765670201371.json
[Performance] Playlist dialog open: 125ms
[Performance] Playlist create: 0ms
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Performance] Generated report: /workspace/tmp/performance/performance-report-1765670201427.md
  ‚úì   68 [chromium] ‚Ä∫ tests/e2e/performance.spec.ts:701:5 ‚Ä∫ Performance Tests (Test Collection) ‚Ä∫ 5. Playlist Operations - Create and manage playlist (1.4s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   71 [chromium] ‚Ä∫ tests/e2e/scheduler-export-import.spec.ts:82:3 ‚Ä∫ Classification Scheduler ‚Ä∫ should enable time input when scheduler is enabled (555ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   72 [chromium] ‚Ä∫ tests/e2e/scheduler-export-import.spec.ts:103:3 ‚Ä∫ Classification Export/Import ‚Ä∫ should display all export/import UI elements (595ms)
[Navigation] Navigating to /admin?tab=wizard
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   73 [chromium] ‚Ä∫ tests/e2e/scheduler-export-import.spec.ts:126:3 ‚Ä∫ Classify Tab Integration ‚Ä∫ should show all classification sections and buttons (585ms)
[Navigation] Successfully loaded /admin?tab=wizard
[Navigation] Navigating to /admin?tab=rate
[Navigation] Successfully loaded /admin?tab=rate
  ‚úì   74 [chromium] ‚Ä∫ tests/e2e/scheduler-export-import.spec.ts:137:3 ‚Ä∫ Classify Tab Integration ‚Ä∫ should display progress counters (Rendered, Cached, Extracted, Remaining) (601ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Navigation] Navigating to /?tab=play
[Navigation] Successfully loaded /?tab=play
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[image-comparison] Screenshot unchanged, skipping save: /workspace/doc/web-screenshots/01-wizard.png
[WIZARD] Screenshot unchanged: 01-wizard.png
[WIZARD tab screenshot] Page closed unexpectedly
  ‚úì   75 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ WIZARD tab screenshot (1.3s)
[Navigation] Navigating to /?tab=prefs
[Navigation] Successfully loaded /?tab=prefs
[image-comparison] Screenshot unchanged, skipping save: /workspace/doc/web-screenshots/04-rate.png
[RATE] Screenshot unchanged: 04-rate.png
[RATE tab screenshot] Page closed unexpectedly
  ‚úì   76 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ RATE tab screenshot (1.4s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[Navigation] Navigating to /admin?tab=classify
[Navigation] Successfully loaded /admin?tab=classify
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[image-comparison] Dimension change detected: Image dimensions differ: 1280x1576 vs 1280x1550
[PLAY] Screenshot updated: 07-play.png
[PLAY tab screenshot] Page closed unexpectedly
  ‚úì   77 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ PLAY tab screenshot (1.9s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[image-comparison] Screenshot negligible change (244/2394880 = 0.0102%), skipping save: /workspace/doc/web-screenshots/02-prefs.png
[PREFS] Screenshot unchanged: 02-prefs.png
[PREFS tab screenshot] Page closed unexpectedly
  ‚úì   78 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ PREFS tab screenshot (1.4s)
[Navigation] Navigating to /admin?tab=fetch
[Navigation] Successfully loaded /admin?tab=fetch
[image-comparison] Screenshot unchanged, skipping save: /workspace/doc/web-screenshots/05-classify.png
[CLASSIFY] Screenshot unchanged: 05-classify.png
[CLASSIFY tab screenshot] Page closed unexpectedly
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   79 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ CLASSIFY tab screenshot (1.4s)
[Navigation] Navigating to /admin?tab=train
[Navigation] Successfully loaded /admin?tab=train
  ‚úì   80 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:13:5 ‚Ä∫ Social Features ‚Ä∫ should display login and signup buttons when not authenticated (987ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[image-comparison] Screenshot unchanged, skipping save: /workspace/doc/web-screenshots/03-fetch.png
[FETCH] Screenshot unchanged: 03-fetch.png
[FETCH tab screenshot] Page closed unexpectedly
  ‚úì   81 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ FETCH tab screenshot (1.1s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[image-comparison] Screenshot unchanged, skipping save: /workspace/doc/web-screenshots/06-train.png
[TRAIN] Screenshot unchanged: 06-train.png
[TRAIN tab screenshot] Page closed unexpectedly
  ‚úì   82 [chromium] ‚Ä∫ tests/e2e/screenshots.spec.ts:562:7 ‚Ä∫ Tab Screenshots ‚Ä∫ TRAIN tab screenshot (1.1s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   85 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:65:5 ‚Ä∫ Social Features ‚Ä∫ should navigate to Activity tab (1.0s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   86 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:78:5 ‚Ä∫ Social Features ‚Ä∫ should display activity refresh button (1.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   87 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:91:5 ‚Ä∫ Social Features ‚Ä∫ should navigate to Profiles tab (1.3s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   88 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:103:5 ‚Ä∫ Social Features ‚Ä∫ should allow profile search (1.2s)
  ‚úì   83 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:26:5 ‚Ä∫ Social Features ‚Ä∫ should open registration dialog and validate form (5.7s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] Error reading feedback directory: Error: ENOENT: no such file or directory, scandir '/workspace/data/feedback'
[WebServer]     at ignore-listed frames {
[WebServer]   errno: -2,
[WebServer]   code: 'ENOENT',
[WebServer]   syscall: 'scandir',
[WebServer]   path: '/workspace/data/feedback'
[WebServer] }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   84 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:46:5 ‚Ä∫ Social Features ‚Ä∫ should open login dialog (5.7s)
[browser console] log [CrossOriginIsolatedCheck] ‚úì crossOriginIsolated is true
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[browser console] debug [ServiceWorkerBridge] Service worker registered {scope: http://127.0.0.1:3000/}
  ‚úì   90 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:135:5 ‚Ä∫ Social Features ‚Ä∫ should display all social tabs for public users (953ms)
(node:51217) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
  ‚úì   89 [chromium] ‚Ä∫ tests/e2e/social-features.spec.ts:123:5 ‚Ä∫ Social Features ‚Ä∫ should navigate to Charts tab (1.4s)
(node:51226) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:51217) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:51226) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
[browser console] log [WorkletPlayer] ‚úì AudioWorklet initialized
[browser console] log [SidProducer] Buffer strategy configured {capacityFrames: 32768, preRollFrames: 2560, renderChunkFrames: 2048, renderCyclesPerChunk: 98304, blockSize: 128}
[browser console] log [SidProducer] ‚úì Initialized {sampleRate: 44100, channels: 2, blockSize: 128}
[browser console] log [WorkletPlayer] ‚úì Web Worker initialized
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[browser console] log [SidProducer] ‚úì Loaded SID buffer into engine
[browser console] log [WorkletPlayer] Worker loaded SID payload
[browser console] log [WorkletPlayer] Worker load resolved
[browser console] log [WorkletPlayer] play() invoked {state: ready}
[browser console] log [SidProducer] Pre-roll start {targetFrames: 2560}
[browser console] warning [SidProducer] Occupancy reached zero before producing new audio {framesProduced: 0}
[browser console] log [SidProducer] Pre-roll complete {occupancy: 2560, shouldStop: false}
[browser console] log [WorkletPlayer] Worker pre-roll complete, ready to play
[browser console] log [WorkletPlayer] Worker ready resolved, continuing playback setup
  ‚úì   92 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:158:3 ‚Ä∫ Favorites Feature ‚Ä∫ should display favorites tab for public users (986ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   93 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:23:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Search Interaction (3.9) ‚Ä∫ should allow searching via the search bar (1.0s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   95 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:43:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Search Interaction (3.9) ‚Ä∫ should show no results for non-matching query (862ms)
Telemetry snapshot (no underruns test): {
  underruns: [33m0[39m,
  framesConsumed: [33m65536[39m,
  framesProduced: [33m99328[39m,
  backpressureStalls: [33m0[39m,
  minOccupancy: [33m2176[39m,
  maxOccupancy: [33m32640[39m,
  zeroByteFrames: [33m0[39m,
  missedQuanta: [33m0[39m,
  avgDriftMs: [33m4.909826478759552e-14[39m,
  maxDriftMs: [33m1.6263032587282567e-13[39m,
  contextSuspendCount: [33m0[39m,
  contextResumeCount: [33m1[39m,
  renderMaxDurationMs: [33m8.090000003576279[39m,
  renderAvgDurationMs: [33m0.7706902352246371[39m,
  ringBufferCapacityFrames: [33m32768[39m
}
  ‚úì   91 [chromium] ‚Ä∫ tests/e2e/telemetry-validation.spec.ts:145:3 ‚Ä∫ Telemetry Validation ‚Ä∫ verifies no underruns during normal playback (3.5s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   96 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:61:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Search Interaction (3.9) ‚Ä∫ should clear search results when input is cleared (817ms)
  ‚úì   94 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:168:3 ‚Ä∫ Favorites Feature ‚Ä∫ should reflect favorites when entries are added or removed (2.1s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì   99 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:185:3 ‚Ä∫ Favorites Feature ‚Ä∫ should show play all and shuffle buttons when favorites exist (1.3s)
  ‚úì   98 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:88:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Keyboard Shortcuts (4.7) ‚Ä∫ should focus search bar with S key (1.5s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  100 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:202:3 ‚Ä∫ Favorites Feature ‚Ä∫ should show clear all button only when favorites exist (1.4s)
  ‚úì   97 [chromium] ‚Ä∫ tests/e2e/telemetry-validation.spec.ts:175:3 ‚Ä∫ Telemetry Validation ‚Ä∫ verifies zero-byte frames are minimal (3.5s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  101 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:104:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Keyboard Shortcuts (4.7) ‚Ä∫ should open shortcuts help with ? key (1.7s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  104 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:120:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Keyboard Shortcuts (4.7) ‚Ä∫ should not trigger shortcuts when typing in search (395ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  102 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:212:3 ‚Ä∫ Favorites Feature ‚Ä∫ should display favorite tracks with metadata (1.3s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  106 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:229:3 ‚Ä∫ Favorites Feature ‚Ä∫ should maintain favorites state across tab switches (1.3s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  105 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:137:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Top Charts Display (5.9) ‚Ä∫ should display top charts tab (2.0s)
  ‚úì  107 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:246:3 ‚Ä∫ Favorites Feature ‚Ä∫ should handle favorite button loading states (713ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  103 [chromium] ‚Ä∫ tests/e2e/telemetry-validation.spec.ts:194:3 ‚Ä∫ Telemetry Validation ‚Ä∫ verifies timing drift stays within bounds (3.5s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  109 [chromium-favorites] ‚Ä∫ tests/e2e/favorites.spec.ts:261:3 ‚Ä∫ Favorites Feature ‚Ä∫ should show appropriate empty state messaging (1.3s)
(node:52229) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:52229) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
[WebServer] Error reading feedback directory: Error: ENOENT: no such file or directory, scandir '/workspace/data/feedback'
[WebServer]     at ignore-listed frames {
[WebServer]   errno: -2,
[WebServer]   code: 'ENOENT',
[WebServer]   syscall: 'scandir',
[WebServer]   path: '/workspace/data/feedback'
[WebServer] }
  ‚úì  108 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:154:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Top Charts Display (5.9) ‚Ä∫ should switch between time ranges (2.3s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  111 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:98:5 ‚Ä∫ Song Browser ‚Ä∫ displays song browser component (823ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  113 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:111:5 ‚Ä∫ Song Browser ‚Ä∫ shows breadcrumb navigation (494ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  110 [chromium] ‚Ä∫ tests/e2e/telemetry-validation.spec.ts:212:3 ‚Ä∫ Telemetry Validation ‚Ä∫ verifies buffer occupancy is healthy (3.6s)
  ‚úì  114 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:121:5 ‚Ä∫ Song Browser ‚Ä∫ displays folders and files when available (504ms)
  ‚úì  112 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:179:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Top Charts Display (5.9) ‚Ä∫ should show empty state when no data (2.2s)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  116 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:153:5 ‚Ä∫ Song Browser ‚Ä∫ navigates to folder when clicked (841ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  117 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:195:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Theme Switching (6.8) ‚Ä∫ should switch between themes (1.0s)
[folder-buttons] clicking play tab
[folder-buttons] waiting for collection browser heading
[folder-buttons] C64Music folder visible: [33mtrue[39m
[folder-buttons] action buttons found: [33m8[39m
  ‚úì  118 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:176:5 ‚Ä∫ Song Browser ‚Ä∫ shows folder action buttons (486ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  115 [chromium] ‚Ä∫ tests/e2e/telemetry-validation.spec.ts:234:3 ‚Ä∫ Telemetry Validation ‚Ä∫ verifies telemetry sink works in test mode (1.9s)
  ‚úì  120 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:206:5 ‚Ä∫ Song Browser ‚Ä∫ shows file play buttons (597ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  119 [chromium-phase1] ‚Ä∫ tests/e2e/phase1-features.spec.ts:229:9 ‚Ä∫ Phase 1 Features ‚Ä∫ Theme Switching (6.8) ‚Ä∫ should persist theme across page reloads (1.1s)
  ‚úì  121 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:234:5 ‚Ä∫ Volume Control ‚Ä∫ volume slider is visible (463ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  122 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:239:5 ‚Ä∫ Volume Control ‚Ä∫ volume slider has correct range (452ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  123 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:248:5 ‚Ä∫ Volume Control ‚Ä∫ volume icon changes based on volume level (431ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  124 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:254:5 ‚Ä∫ Volume Control ‚Ä∫ volume slider starts at 100% (421ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  125 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:274:5 ‚Ä∫ Playback Mode Display ‚Ä∫ shows default mood station mode (428ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  126 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:284:5 ‚Ä∫ Playback Mode Display ‚Ä∫ displays upcoming tracks section (440ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  127 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:295:5 ‚Ä∫ Playback Mode Display ‚Ä∫ shows played tracks section (409ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  128 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:314:5 ‚Ä∫ Play Controls ‚Ä∫ displays playback control buttons (407ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  129 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:323:5 ‚Ä∫ Play Controls ‚Ä∫ shows progress slider (430ms)
[WebServer] [Model API] Falling back to stub manifest { resolvedPath: '/workspace/data/model' }
  ‚úì  130 [chromium-song-browser] ‚Ä∫ tests/e2e/song-browser.spec.ts:329:5 ‚Ä∫ Play Controls ‚Ä∫ displays time indicators (398ms)
[E2E Coverage] Processing coverage files...


  1) [chromium] ‚Ä∫ tests/e2e/classify-heartbeat.spec.ts:147:1 ‚Ä∫ Classification Heartbeat - threads should not become stale during feature extraction 

    Error: apiRequestContext.get: read ECONNRESET
    Call log:
    [2m  - ‚Üí GET http://127.0.0.1:3000/api/classify/progress[22m
    [2m    - user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.7499.4 Safari/537.36[22m
    [2m    - accept: */*[22m
    [2m    - accept-encoding: gzip,deflate,br[22m


      210 |
      211 |       while (Date.now() - startTime < MAX_POLL_MS && (!classificationComplete || activePolls === 0)) {
    > 212 |         const progressResponse = await request.get('/api/classify/progress');
          |                                                ^
      213 |         if (!progressResponse.ok()) {
      214 |           await new Promise((resolve) => setTimeout(resolve, POLL_INTERVAL_MS));
      215 |           continue;
        at /workspace/packages/sidflow-web/tests/e2e/classify-heartbeat.spec.ts:212:48
        at withClassificationLock (/workspace/packages/sidflow-web/tests/e2e/utils/classification-lock.ts:62:12)
        at /workspace/packages/sidflow-web/tests/e2e/classify-heartbeat.spec.ts:148:3

  1 failed
    [chromium] ‚Ä∫ tests/e2e/classify-heartbeat.spec.ts:147:1 ‚Ä∫ Classification Heartbeat - threads should not become stale during feature extraction 
  129 passed (3.6m)
[E2E Coverage Reporter] Saving collected coverage...
[coverage] No coverage data to save
[E2E Coverage Reporter] Coverage saved
error: script "test:e2e" exited with code 1
error: script "test:e2e" exited with code 1
